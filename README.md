<h1 align="center">TS CORE</h1>
**TS CORE** ‚Äî —Å–∞–π—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 5G/4G-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ Django. –û–Ω –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ç–µ–≤—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ —Ç–µ–ª–µ–∫–æ–º-–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–±–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏.

---

## üîç –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
–≠—Ç–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (Subscriber Management), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, —Ç–∞–∫–∏—Ö –∫–∞–∫:

- MSISDN ‚Äî –Ω–æ–º–µ—Ä–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (–æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)

- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (K, AMF, OP/OPc) ‚Äî –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞

- AMBR (Aggregate Maximum Bit Rate) ‚Äî –ª–∏–º–∏—Ç—ã –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

- –°–µ—Ç–µ–≤—ã–µ —Å—Ä–µ–∑—ã (Slice) ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ S-NSSAI –¥–ª—è 5G-—Å–µ—Ç–µ–π, –≤–∫–ª—é—á–∞—è SST, SD, QoS, PCC

- –°–µ—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø–∞ (Session Configurations) ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞, —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

- –í—Å–µ –ø–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JSON-—Ñ–æ—Ä–º—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Å –ø–æ–º–æ—â—å—é django-jsonform, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –∏ –≥–∏–±–∫–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ HTML.

---

## üë§ –ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–∂–µ–Ω–µ—Ä –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏) —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–∂–µ—Ç:

- –°–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏ (Subscriber)

- –£–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ MSISDN

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞ (–∫–ª—é—á–∏, AMF, OP/OPc)

- –ó–∞–¥–∞–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (AMBR)

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Å—Ä–µ–∑—ã –¥–ª—è 5G, –≤–∫–ª—é—á–∞—è SST/SD –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ —Å–µ—Å—Å–∏–∏, QoS-–ø—Ä–æ—Ñ–∏–ª–∏, PCC-–ø—Ä–∞–≤–∏–ª–∞

- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–≤–∞–ª–∏–¥–∞—Ü–∏—è ID, hex, —á–∏—Å–ª–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∏ —Ç.–ø.)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ email —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –ø–æ –ø–æ—á—Ç–µ

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–±—ã—Ç–æ–º –ø–∞—Ä–æ–ª–µ ‚Äî –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ email, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å

–¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º email.
–†–µ—à–µ–Ω–∏–µ –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.
–ò–º–µ–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π.

---

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è          | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                          |
|--------------------|-------------------------------------|
| **Backend**        | Python 3.9, Django                  |
| **Frontend**       | Jinja2, django-jsonform             |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**    | PostgreSQL, MongoDB                 |
| **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | Docker, Docker Compose, Nginx       |
| **CI/CD**          | GitHub Actions                      |


---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë:
```
mkdir ts_core && cd ts_core
```
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```
# Django
SECRET_KEY=<—Å–ª–æ–∂–Ω—ã–π_–∫–ª—é—á>
DEBUG=False
DJANGO_ALLOWED_HOSTS=<—Ö–æ—Å—Ç_—Å–µ—Ä–≤–µ—Ä–∞>,localhost,127.0.0.1

# Email
EMAIL_HOST=<SMTP_—Ö–æ—Å—Ç>
EMAIL_PORT=<SMTP_–ø–æ—Ä—Ç>
EMAIL_HOST_USER=<–ø–æ—á—Ç–æ–≤—ã–π_–ª–æ–≥–∏–Ω>
EMAIL_HOST_PASSWORD=<–ø–æ—á—Ç–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å>
EMAIL_USE_TLS=True

# –ê–¥–º–∏–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
ADMIN_USERNAME=<–∏–º—è_–∞–¥–º–∏–Ω–∞>
ADMIN_EMAIL=<email_–∞–¥–º–∏–Ω–∞>
ADMIN_PASSWORD=<–ø–∞—Ä–æ–ª—å_–∞–¥–º–∏–Ω–∞>

# PostgreSQL (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ DB_HOST –∏ DB_PORT –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
POSTGRES_USER=<db_user>
POSTGRES_PASSWORD=<db_password>
POSTGRES_DB=<db_name>
DB_HOST=ts_core_db
DB_PORT=5432

# MongoDB (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ MONGO_HOST –∏ MONGO_PORT –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
MONGO_HOST=host.docker.internal
MONGO_PORT=27018
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose (Ubuntu)
1. –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
sudo apt update && sudo apt install ca-certificates curl
```
2. –î–æ–±–∞–≤—å—Ç–µ GPG-–∫–ª—é—á –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker:
```
sudo install -m 0755 -d /etc/apt/keyrings
```
```
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | \
  sudo tee /etc/apt/keyrings/docker.asc > /dev/null
sudo chmod a+r /etc/apt/keyrings/docker.asc
```
```
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] \
  https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker:
```
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Docker:
```
sudo systemctl status docker 
```

### –ü–µ—Ä–µ–Ω–æ—Å Docker-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker:
```
sudo systemctl stop docker
```
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:
```
sudo mv /var/lib/docker <–Ω–æ–≤—ã–π_–ø—É—Ç—å>;
sudo ln -s <–Ω–æ–≤—ã–π_–ø—É—Ç—å> /var/lib/docker;
sudo chown -R root:root <–Ω–æ–≤—ã–π_–ø—É—Ç—å>;
```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```
sudo systemctl start docker && docker info | grep "Docker Root Dir"
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Docker
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ –ø–∞–ø–∫—É ts_core:
   - —Ñ–∞–π–ª docker-compose.production.yml
   - –ø–∞–ø–∫—É system_config
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–∑—ã –∏–∑ Docker Hub:
```
sudo docker compose -f docker-compose.production.yml pull
```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
```
sudo docker compose -f docker-compose.production.yml down
```
```
sudo docker compose -f docker-compose.production.yml up -d
```
6. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ system_config:
```
cd system_config;
chmod +x setup_socat_proxy.sh;
chmod +x shutdown_counter.sh;
chmod +x update_crontab.sh;
./setup_socat_proxy.sh;
./shutdown_counter.sh;
./update_crontab.sh;
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª /etc/nginx/sites-enabled/default:
```
server {
        listen 80;

        server_name _;

        location / {
            proxy_set_header Host $http_host;
            proxy_pass http://127.0.0.1:8000;
        }
}
```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```
sudo nginx -t
```
```
sudo service nginx reload
```

### ‚úÖ –ì–æ—Ç–æ–≤–æ!
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://<—Ö–æ—Å—Ç_—Å–µ—Ä–≤–µ—Ä–∞>/


# monitoring_equipment
Python 3.9

<!-- pip install django-ipware --no-deps -->

# –ó–∞–ø—É—Å–∫ PEP8
python -m flake8
isort .


# –ó–∞–ø—É—Å–∫ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
1. –°–æ–∑–¥–∞–π—Ç–µ volume –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
sudo docker volume create ts_core_db_data 
2. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –ë–î –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ .env —Ñ–∞–π–ª–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ Docker volume:
<!-- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º—ã –æ—Ç–∫—Ä–æ–µ–º –Ω—É–∂–Ω—ã–π –Ω–∞–º –ø–æ—Ä—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä 5438 —Ö–æ—Å—Ç–∞ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–Ω—è—Ç) –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏–º –µ–≥–æ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ—Ä—Ç–æ–º 5432 -->
sudo docker run --name ts_core_db --env-file .env -v ts_core_db_data:/var/lib/postgresql/data -p 5438:5432 postgres:13.10

<!-- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
sudo docker compose stop
<!-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
sudo docker container prune -f
<!-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã -->
sudo docker image prune -f

## –ê–≤—Ç–æ—Ä
<h2 align="center">**–ß–æ–ª–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä** ([Telegram](https://t.me/alexander_choliy))</h2>
