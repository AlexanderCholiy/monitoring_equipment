# TS CORE
**TS CORE** ‚Äî —Å–∞–π—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 5G/4G-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ Django. –û–Ω –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ç–µ–≤—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏–ª–∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ —Ç–µ–ª–µ–∫–æ–º-–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–±–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏.

## üîç –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
–≠—Ç–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (Subscriber Management), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, —Ç–∞–∫–∏—Ö –∫–∞–∫:

MSISDN ‚Äî –Ω–æ–º–µ—Ä–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (–æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (K, AMF, OP/OPc) ‚Äî –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞

AMBR (Aggregate Maximum Bit Rate) ‚Äî –ª–∏–º–∏—Ç—ã –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ç–µ–≤—ã–µ —Å—Ä–µ–∑—ã (Slice) ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ S-NSSAI –¥–ª—è 5G-—Å–µ—Ç–µ–π, –≤–∫–ª—é—á–∞—è SST, SD, QoS, PCC

–°–µ—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø–∞ (Session Configurations) ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞, —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

–í—Å–µ –ø–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JSON-—Ñ–æ—Ä–º—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Å –ø–æ–º–æ—â—å—é django-jsonform, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –∏ –≥–∏–±–∫–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ HTML.

## üë§ –ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–∂–µ–Ω–µ—Ä –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏) —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–∂–µ—Ç:

- –°–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏ (Subscriber)

- –£–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ MSISDN

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–±–æ–Ω–µ–Ω—Ç–∞ (–∫–ª—é—á–∏, AMF, OP/OPc)

- –ó–∞–¥–∞–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (AMBR)

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Å—Ä–µ–∑—ã –¥–ª—è 5G, –≤–∫–ª—é—á–∞—è SST/SD –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ —Å–µ—Å—Å–∏–∏, QoS-–ø—Ä–æ—Ñ–∏–ª–∏, PCC-–ø—Ä–∞–≤–∏–ª–∞

- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–≤–∞–ª–∏–¥–∞—Ü–∏—è ID, hex, —á–∏—Å–ª–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∏ —Ç.–ø.)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

- –ò–∑–º–µ–Ω–µ–Ω–∏–µ email —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –ø–æ –ø–æ—á—Ç–µ

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–±—ã—Ç–æ–º –ø–∞—Ä–æ–ª–µ ‚Äî –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ email, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å

–¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º email.
–†–µ—à–µ–Ω–∏–µ –æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.
–ò–º–µ–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π.



üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
Python + Django

MongoDB (—Å—É–¥—è –ø–æ ObjectId –∏ bson)

django-jsonform ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ JSON-—Å—Ö–µ–º—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º –≤ —Å—Ç–∏–ª–µ OpenAPI/JSON Schema

–ö–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∏ —Å—Ö–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏


# monitoring_equipment
Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
Python 3.9

<!-- pip install django-ipware --no-deps -->

# –ó–∞–ø—É—Å–∫ PEP8
python -m flake8
isort .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
1. –ù–∞—Ö–æ–¥—è—Å—å –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
sudo apt install nginx -y 
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx –∫–æ–º–∞–Ω–¥–æ–π:
sudo systemctl start nginx
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Nginx:
–í–≤–µ–¥–∏—Ç–µ –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ—Ä—Ç–∞. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ç Nginx


# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Engine –≤ Ubuntu
1. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ curl ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ –∫–æ–º–∞–Ω–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
sudo apt update
sudo apt install curl
2. –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π Docker Engine –Ω–∞ –Ω–æ–≤—ã–π —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å apt—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker.
# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
3. –ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç:
sudo systemctl status docker 

# –ü–µ—Ä–µ–Ω–æ—Å Docker —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞ /var/log (–¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ–º –≤ Docker Volume)
1. –û—Å—Ç–∞–Ω–æ–≤–∏–º Docker 
sudo systemctl stop docker
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É (–µ—Å–ª–∏ –Ω–∞–¥–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ):
sudo mv /var/lib/docker /var/log/docker
–ò–ª–∏ –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å:
sudo rm -rf /var/lib/docker
sudo mkdir /var/log/docker
3. –°–æ–∑–¥–∞–π —Å–∏–º–ª–∏–Ω–∫:
sudo ln -s /var/log/docker /var/lib/docker
4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏:
sudo chown -R root:root /var/log/docker
5. –ó–∞–ø—É—Å—Ç–∏ Docker —Å–Ω–æ–≤–∞:
sudo systemctl start docker
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Docker:
docker info | grep "Docker Root Dir"

# –ó–∞–ø—É—Å–∫ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
1. –°–æ–∑–¥–∞–π—Ç–µ volume –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
sudo docker volume create ts_core_db_data 
2. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –ë–î –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ .env —Ñ–∞–π–ª–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ Docker volume:
<!-- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º—ã –æ—Ç–∫—Ä–æ–µ–º –Ω—É–∂–Ω—ã–π –Ω–∞–º –ø–æ—Ä—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä 5438 —Ö–æ—Å—Ç–∞ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–Ω—è—Ç) –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏–º –µ–≥–æ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ—Ä—Ç–æ–º 5432 -->
sudo docker run --name ts_core_db --env-file .env -v ts_core_db_data:/var/lib/postgresql/data -p 5438:5432 postgres:13.10
<!-- –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç 5438 -->
<!-- –í –ø—Ä–æ–¥–∞–∫—à–Ω–µ –º—ã —Å–≤—è–∂–µ–º —á–µ—Ä–µ Docker network –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ë–î –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
sudo docker run --name ts_core_db --env-file .env -v pg_data:/var/lib/postgresql/data postgres:13.10 

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Docker network:
1. –ß—Ç–æ–±—ã Django –º–æ–≥ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–±—â—É—é —Å–µ—Ç—å.
sudo docker network create ts_core_network 
2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ —Å–µ—Ç–∏ ts_core_network –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ts_core_db
sudo docker network connect ts_core_network ts_core_db

# –ó–∞–ø—É—Å–∫ web –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker:
1. –°–æ–±–µ—Ä–µ–º –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ts_core_backend:  
sudo docker build -t ts_core_backend . 
2. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ host.docker.internal:27018, –∞ —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω–æ –Ω–∞ 127.0.0.1:27017 —á–µ—Ä–µ–∑ socat
sudo apt update && sudo apt install socat -y
sudo socat TCP-LISTEN:27018,fork TCP:127.0.0.1:27017
2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (—É—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ MongoDB —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ 127.0.0.1):
sudo docker run --env-file .env --net ts_core_network --name ts_core_backend --add-host=host.docker.internal:host-gateway -p 8000:8000 ts_core_backend

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:
1. –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
sudo docker compose stop && sudo docker compose up --build
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –ë–î:
sudo docker compose exec ts_core_backend python manage.py migrate
3. –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏:
sudo docker compose exec ts_core_backend python manage.py collectstatic
4. –ö–æ–ø–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏–∫—É –≤ /collected_static/static/, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ volume static –≤ –ø–∞–ø–∫—É /static/
sudo docker compose exec ts_core_backend cp -r /app/collected_static/. /backend_static/ 



# –ü—Ä–æ–¥–∞–∫—à–Ω:
sudo docker build -t alexandercholiy/ts_core_backend .
sudo docker build -t alexandercholiy/ts_core_gateway ./gateway
<!-- —Å–æ–∑–¥–∞–µ–º –æ–±—Ä–∞–∑ –Ω–∞ DockerHub -->
sudo docker login -u alexandercholiy
sudo docker push alexandercholiy/ts_core_backend
sudo docker push alexandercholiy/ts_core_gateway

sudo docker compose -f docker-compose.production.yml up
sudo docker compose -f docker-compose.production.yml exec -it backend bash

<!-- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
sudo docker compose stop
<!-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
sudo docker container prune -f
<!-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã -->
sudo docker image prune -f

# –°–æ–∑–¥–∞—ë–º systemd-—Å–µ—Ä–≤–∏—Å socat
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ socat
sudo apt update && sudo apt install socat -y
2. –°–æ–∑–¥–∞–π systemd unit-—Ñ–∞–π–ª:
sudo nano /etc/systemd/system/socat-mongo-proxy.service
3. –í—Å—Ç–∞–≤—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
[Unit]
Description=Socat proxy from Docker to local MongoDB
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
ExecStart=/usr/bin/socat TCP-LISTEN:27018,fork TCP:127.0.0.1:27017
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
4. –û–±–Ω–æ–≤–∏ systemd –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å:
sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl enable --now socat-mongo-proxy.service
5. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
sudo systemctl status socat-mongo-proxy.service









<!-- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
cd ts_core
# –í—ã–ø–æ–ª–Ω—è–µ—Ç pull –æ–±—Ä–∞–∑–æ–≤ —Å Docker Hub
sudo docker compose -f docker-compose.production.yml pull
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ Docker Compose
sudo docker compose -f docker-compose.production.yml down
sudo docker compose -f docker-compose.production.yml up -d
# –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–±–æ—Ä —Å—Ç–∞—Ç–∏–∫–∏ —É–∂–µ –µ—Å—Ç—å –≤ docker-compose.production.yml



<!-- –§–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ socat -->
chmod +x setup_socat_proxy.sh
chmod +x shutdown_counter.sh
chmod +x update_crontab.sh